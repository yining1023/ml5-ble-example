!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.p5ble=t():e.p5ble=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";(function(t){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(3)),o=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var c=t[i](o),u=c.value}catch(e){return void n(e)}if(!c.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}t._babelPolyfill=!1;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.device=null,this.server=null,this.service=null,this.characteristics=[],this.handleNotifications=null}return r(e,[{key:"connect",value:function(e,t){var n=this,r={filters:[{services:[e]}]};return console.log("Requesting Bluetooth Device..."),(0,i.default)(navigator.bluetooth.requestDevice(r).then(function(e){return n.device=e,console.log("Got device "+e.name),e.gatt.connect()}).then(function(t){return n.server=t,console.log("Getting Service..."),t.getPrimaryService(e)}).then(function(e){return n.service=e,console.log("Getting Characteristics..."),e.getCharacteristics()}).then(function(e){return n.characteristics=e,console.log("Got Characteristic"),e}).catch(function(e){console.error("Error: "+e)}),t)}},{key:"read",value:function(){var e=u(regeneratorRuntime.mark(function e(t,n,r){var c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=void 0,u=void 0,"function"==typeof n?c=n:"string"==typeof n&&(u=n),"function"==typeof r&&(c=r),t&&t.uuid||console.error("The characteristic does not exist."),this.characteristics.find(function(e){return e.uuid===t.uuid})){e.next=8;break}return e.abrupt("return",console.error("The characteristic does not exist."));case 8:return e.abrupt("return",(0,i.default)(t.readValue().then(function(e){return(0,o.default)(e,u)}),c));case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"write",value:function(e,t){if(e&&e.uuid||console.error("The characteristic does not exist."),!this.characteristics.find(function(t){return t.uuid===e.uuid}))return console.error("The characteristic does not exist.");var n=Uint8Array.of(t);return console.log("Writing "+t+" to Characteristic..."),e.writeValue(n)}},{key:"startNotifications",value:function(){var e=u(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.uuid||console.error("The characteristic does not exist."),this.characteristics.find(function(e){return e.uuid===t.uuid})){e.next=4;break}return e.abrupt("return",console.error("The characteristic does not exist."));case 4:return e.next=6,t.startNotifications();case 6:return console.log("> Notifications started"),this.handleNotifications=function(e){var t=e.target.value,i=(0,o.default)(t,r);n(i)},e.abrupt("return",t.addEventListener("characteristicvaluechanged",this.handleNotifications));case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"stopNotifications",value:function(){var e=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.uuid||console.error("The characteristic does not exist."),this.characteristics.find(function(e){return e.uuid===t.uuid})){e.next=4;break}return e.abrupt("return",console.error("The characteristic does not exist."));case 4:return e.prev=4,e.next=7,t.stopNotifications();case 7:if(!this.handleNotifications){e.next=10;break}return console.log("> Notifications stopped"),e.abrupt("return",t.removeEventListener("characteristicvaluechanged",this.handleNotifications));case 10:return e.abrupt("return",console.log("> Notifications stopped"));case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",console.error("Error: "+e.t0));case 16:case"end":return e.stop()}},e,this,[[4,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.device&&(console.log("Disconnecting from Bluetooth Device..."),this.device.gatt.connected?this.device.gatt.disconnect():console.log("> Bluetooth Device is already disconnected"))}},{key:"onDisconnected",value:function(e){return this.device?this.device.addEventListener("gattserverdisconnected",e):console.error("There is no device connected.")}},{key:"isConnected",value:function(){return!!this.device&&!!this.device.gatt.connected}}]),e}();e.exports=a}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t&&e.then(function(e){return t(void 0,e),e}).catch(function(e){return t(e),e});return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=t?t.toLowerCase():"unit8",i=void 0,o=void 0;switch(r){case"unit8":i=e.getUint8(0);break;case"uint16":i=e.getUint16(0);break;case"uint32":i=e.getUint32(0);break;case"int8":i=e.getInt8(0);break;case"int16":i=e.getInt16(0);break;case"int32":i=e.getInt32(0);break;case"float32":i=e.getFloat32(0);break;case"float64":i=e.getFloat64(0);break;case"string":o=new TextDecoder(n||"utf8"),i=o.decode(e);break;default:i=e.getUint8(0)}return i}}])});
//# sourceMappingURL=p5.ble.min.js.map